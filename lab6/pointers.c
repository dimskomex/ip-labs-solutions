#include <stdio.h>

/*
 * Συνάρτηση που εκτυπώνει τα στοιχεία ενός πίνακα ακεραίων.
 * array: δείκτης στον πρώτο στοιχείο του πίνακα
 * n: πλήθος στοιχείων του πίνακα
 */
void print_array(int *array, int n) {
    int i;
    // Επανάληψη σε όλα τα στοιχεία του πίνακα
    for (i = 0; i < n; ++i) {
        // Εκτύπωση του κάθε στοιχείου με tab για καλύτερη μορφοποίηση
        printf("%d\t", array[i]);
    }
    // Αλλαγή γραμμής μετά την εκτύπωση του πίνακα
    printf("\n");
}

int main(void) {
    int i, a[8], *pa;   // a: πίνακας 8 ακεραίων
                        // pa: δείκτης σε ακέραιο (θα δείχνει σε στοιχεία του πίνακα)

    /*
     * Αρχικοποίηση του πίνακα:
     * Κάθε στοιχείο a[i] παίρνει την τιμή i*i (τετράγωνο του δείκτη).
     */
    for (i = 0; i < 8; i++)
        a[i] = i * i;

    // Εκτύπωση της αρχικής κατάστασης του πίνακα
    print_array(a, 8);

    /*
     * Ο pa δείχνει στο πρώτο στοιχείο του πίνακα (a[0]).
     */
    pa = &a[0];

    /*
     * Θέτουμε το a[6] ίσο με την τιμή του *(a + 4),
     * δηλαδή με το περιεχόμενο της θέσης a[4].
     * Εδώ χρησιμοποιείται αριθμητική δεικτών.
     */
    a[6] = *(a + 4);
    print_array(a, 8);

    /*
     * Θέτουμε το στοιχείο στο pa+3 (δηλαδή a[3])
     * ίσο με την τιμή του a[5].
     */
    *(pa + 3) = a[5];
    print_array(a, 8);

    /*
     * Το pa++ επιστρέφει πρώτα την τρέχουσα τιμή του pa
     * και μετά αυξάνει τον δείκτη ώστε να δείχνει στο επόμενο στοιχείο.
     * Έτσι:
     *   *((pa++) + 2) ισοδυναμεί με a[2],
     * και η τιμή αυτή αποθηκεύεται στο a[0].
     * Μετά την εντολή, ο pa δείχνει στο a[1].
     */
    a[0] = *((pa++) + 2);
    print_array(a, 8);

    /*
     * Το ++pa αυξάνει πρώτα τον δείκτη pa,
     * ώστε να δείχνει στο επόμενο στοιχείο.
     * Στη συνέχεια το *((++pa) + 5) αναφέρεται σε συγκεκριμένη
     * θέση του πίνακα και εκεί αποθηκεύεται η τιμή του a[1].
     */
    *((++pa) + 5) = a[1];
    print_array(a, 8);

    /*
     * Η έκφραση &a[5] - 1 δείχνει στο a[4].
     * Το --pa μειώνει τον δείκτη pa ώστε να δείχνει
     * στο προηγούμενο στοιχείο.
     * Η τιμή στην οποία δείχνει ο pa αποθηκεύεται στο a[4].
     */
    *(&a[5] - 1) = *(--pa);
    print_array(a, 8);

    return 0;   // Τερματισμός του προγράμματος
}
